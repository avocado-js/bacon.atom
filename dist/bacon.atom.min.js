!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("partial.lenses"),require("infestines"),require("baconjs")):"function"==typeof define&&define.amd?define(["partial.lenses","infestines","baconjs"],n):(e.bacon=e.bacon||{},e.bacon.atom=n(e.L,e.I,e.Bacon))}(this,function(e,n,t){"use strict";function i(e){this.modify(function(){return e})}function s(){return e.get(this.mapper,this.parent.get())}function u(n){this.parent.modify(e.modify(this.mapper,n))}function o(){var t=e.compose.apply(void 0,arguments),r=this.map(e.get(t)).skipDuplicates(n.acyclicEqualsU);return r.parent=this,r.mapper=t,r.modify=u,r.get=s,r.set=i,r.lens=o,r.view=o,r}function r(){return this.value}function a(e){this.bus.push(e)}return function(e){var s=t.Bus(),u=s.scan(e,function(e,n){return u.value=n(e)}).skipDuplicates(n.acyclicEqualsU);return u.subscribe(n.id),u.value=e,u.bus=s,u.modify=a,u.get=r,u.set=i,u.lens=o,u.view=o,u}});
